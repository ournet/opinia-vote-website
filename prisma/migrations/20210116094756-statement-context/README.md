# Migration `20210116094756-statement-context`

This migration has been generated by Dumitru C. at 1/16/2021, 11:47:56 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "accounts" ALTER COLUMN "updated_at" SET DEFAULT CURRENT_TIMESTAMP

ALTER TABLE "entities" ALTER COLUMN "updated_at" SET DEFAULT CURRENT_TIMESTAMP

ALTER TABLE "sessions" ALTER COLUMN "updated_at" SET DEFAULT CURRENT_TIMESTAMP

ALTER TABLE "statement_votes" ALTER COLUMN "updated_at" SET DEFAULT CURRENT_TIMESTAMP

ALTER TABLE "statements" ADD COLUMN     "context" TEXT,
ALTER COLUMN "updated_at" SET DEFAULT CURRENT_TIMESTAMP

ALTER TABLE "users" ALTER COLUMN "updated_at" SET DEFAULT CURRENT_TIMESTAMP
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20210102135903-statement-counts..20210116094756-statement-context
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 model StatementVote {
   id          Int @id @default(autoincrement())
@@ -13,9 +13,9 @@
   userId      Int @map("user_id")
   points      Int
   createdAt DateTime @default(now()) @map("created_at")
-  updatedAt DateTime @updatedAt @map("updated_at")
+  updatedAt DateTime @default(now()) @updatedAt @map("updated_at")
   user      User      @relation(fields: [userId], references: [id])
   statement Statement @relation(fields: [statementId], references: [id])
@@ -49,11 +49,12 @@
   authorId     Int           @map("author_id")
   question     String
   sourceUrl    String?       @map("source_url")
   type         StatementType
+  context      String?
   createdAt DateTime @default(now()) @map("created_at")
-  updatedAt DateTime @updatedAt @map("updated_at")
+  updatedAt DateTime @default(now()) @updatedAt @map("updated_at")
   author          Entity            @relation(fields: [authorId], references: [id])
   votes           StatementVote[]
   entities        StatementEntity[]
@@ -84,9 +85,9 @@
   countryCode  String?    @map("country_code")
   wikipediaUrl String?    @map("wikipedia_url")
   createdAt DateTime @default(now()) @map("created_at")
-  updatedAt DateTime @updatedAt @map("updated_at")
+  updatedAt DateTime @default(now()) @updatedAt @map("updated_at")
   statements        Statement[]
   statementEntities StatementEntity[]
   @@unique([name, languageCode])
@@ -111,9 +112,9 @@
   email         String    @unique
   emailVerified DateTime? @map("email_verified")
   image         String?
   createdAt     DateTime  @default(now()) @map("created_at")
-  updatedAt     DateTime  @updatedAt @map("updated_at")
+  updatedAt     DateTime  @default(now()) @updatedAt @map("updated_at")
   votes StatementVote[]
   @@map("users")
 }
@@ -128,9 +129,9 @@
   refreshToken       String?   @map("refresh_token")
   accessToken        String?   @map("access_token")
   accessTokenExpires DateTime? @map("access_token_expires")
   createdAt          DateTime  @default(now()) @map("created_at")
-  updatedAt          DateTime  @updatedAt @map("updated_at")
+  updatedAt          DateTime  @default(now()) @updatedAt @map("updated_at")
   @@index([userId], name: "userId")
   @@index([providerId], name: "providerId")
   @@index([providerAccountId], name: "providerAccountId")
@@ -143,8 +144,8 @@
   expires      DateTime
   sessionToken String   @unique @map("session_token")
   accessToken  String   @unique @map("access_token")
   createdAt    DateTime @default(now()) @map("created_at")
-  updatedAt    DateTime @updatedAt @map("updated_at")
+  updatedAt    DateTime @default(now()) @updatedAt @map("updated_at")
   @@map("sessions")
 }
```


